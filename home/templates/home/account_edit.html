<!--
Html template to edit user. Displays user forms

context:
{
  'form_user': 'User model form',
  'form_profile': 'AppUser form',
  'error_string': 'Error to be displayed',
}
-->
<form action="{% url 'home:user_profile' %}" method="post">
  {% csrf_token %}

  <!-- User Model Attributes -->
  {% for field in form_user.visible_fields %}
    <div class="form-group row">
      <label
        for="{{field.id_for_label}}"
        class="col-sm-2 col-form-label"
      >
        {{field.name.capitalize}}:
      </label>
      <div class="col-sm-10">
        <input
          type="{{ field.field.widget.input_type }}"
          id="{{field.id_for_label}}"
          name ="{{field.html_name}}"

          {% if field.value != None %}
            value="{{field.value}}"
          {% endif %}

          {% if field.name == 'username' %}
            class="form-control-plaintext"
            readonly
          {% else %}
            class="form-control"
          {% endif %}
        >
        <small class="form-text text-muted">
          {{ field.errors }}
        </small>
      </div>
    </div>
  {% endfor %}

  <!-- AppUser Model Attributes -->
  {% for field in form_profile.visible_fields %}
    {% if field.name == "avatar" %}
    <div class="custom-file mt-2 mb-3">
      <input
        type="{{ field.field.widget.input_type }}"
        class="custom-file-input"
        id="{{field.id_for_label}}"
        name="{{field.html_name}}"
      >
      <label class="custom-file-label" for="{{field.id_for_label}}">
        Choose {{field.name.capitalize}}
      </label>
    </div>
    {% else %}
    <div class="form-group row">
      <label
        for="{{ field.id_for_label }}"
        class="col-sm-2 col-form-label"
      >
        {{field.name.capitalize}}:
      </label>
      <div class="col-sm-10">
        <input
          type="{{ field.field.widget.input_type }}"
          class="form-control"
          id="{{field.id_for_label}}"
          name ="{{field.html_name}}"

          {% if field.value != None %}
            value="{{field.value}}"
          {% endif %}
        >
        <small class="form-text text-muted">
          {{ field.errors }}
        </small>
      </div>
    </div>
    {% endif %}
  {% endfor %}

  <button type="submit" class="btn btn-primary">
    Save
  </button>
  <a
    class="btn btn-secondary"
    role="button"
    href="{% url 'home:user_profile' %}"
  >
    Cancel
  </a>

</form>
